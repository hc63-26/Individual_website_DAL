{% extends "base.html" %}

{% block content %}
<main class="content-wide">
    <div class="row">
        <div class="col-md-6">
            <section aria-labelledby="contact-heading">
                <h2 id="contact-heading">Let's Connect</h2>
                <p>You can reach me at:</p>
                <ul class="contact-list">
                    <li>Email: <a href="mailto:hc63@iu.edu">hc63@iu.edu</a></li>
                    <li>LinkedIn: <a href="https://www.linkedin.com/in/queeny-chen/" target="_blank"
                            rel="noopener">www.linkedin.com/in/queeny-chen</a></li>
                    <li>GitHub: <a href="https://github.com/hc63-26/Personal-Website-Queeny.git" target="_blank"
                            rel="noopener">https://github.com/hc63-26/Personal-Website-Queeny.git</a></li>
                </ul>
            </section>
        </div>

        <div class="col-md-6">
            <section aria-labelledby="form-heading">
                <h2 id="form-heading">Send a message</h2>
                <form id="contactForm" method="POST" novalidate>
                    <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input id="firstName" name="firstName" type="text" class="form-control" required
                            pattern=r"^[A-Za-z\-\s']+$" title="Please enter a valid first name" />
                    </div>

                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input id="lastName" name="lastName" type="text" class="form-control" required
                            pattern=r"^[A-Za-z\-\s']+$" title="Please enter a valid last name" />
                    </div>

                    <div class="form-group">
                        <label for="email">Email address</label>
                        <input id="email" name="email" type="email" class="form-control" required
                            aria-describedby="emailHelp" pattern=r"\S+@\S+\.\S+"
                            title="Please enter a valid email address" />
                    </div>

                    <div class="form-group">
                        <label for="password">Password</label>
                        <input id="password" name="password" type="password" class="form-control" minlength="8"
                            required aria-describedby="pwdHelp" />
                        <small id="pwdHelp" class="form-text text-muted">Minimum 8 characters.</small>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input id="confirmPassword" name="confirmPassword" type="password" class="form-control"
                            required aria-describedby="confirmError" />
                        <div id="confirmError" class="form-error" aria-live="polite"></div>
                    </div>

                    <button type="submit" class="btn btn-cta">Submit</button>
                </form>
            </section>
        </div>
    </div>
</main>

<script>
    (function () {
        var form = document.getElementById('contactForm');
        var pwd = document.getElementById('password');
        var confirm = document.getElementById('confirmPassword');
        var confirmError = document.getElementById('confirmError');

        function validateMatch() {
            if (!confirm.value) {
                confirm.setCustomValidity('');
                confirmError.textContent = '';
                return true;
            }
            if (confirm.value !== pwd.value) {
                confirm.setCustomValidity('Passwords do not match');
                confirmError.textContent = 'Passwords do not match';
                return false;
            } else {
                confirm.setCustomValidity('');
                confirmError.textContent = '';
                return true;
            }
        }

        pwd.addEventListener('input', validateMatch);
        confirm.addEventListener('input', validateMatch);

        form.addEventListener('submit', function (e) {
            e.preventDefault(); // control submission to show clear messages

            // Show built-in validation UI if any constraints fail
            if (!form.reportValidity()) {
                return;
            }

            // Ensure passwords match
            if (!validateMatch()) {
                confirm.focus();
                return;
            }

            // All validations passed -> submit the form
            form.submit();
        });
    })();
</script>
{% endblock %}
